(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-save"],{"4f90":function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("14d9"),n("d3b7"),n("e9c4");var i={data:function(){return{res:{},type:2}},onLoad:function(){var t=uni.getStorageSync("data")?uni.getStorageSync("data"):{};if(t.data.imgs=[],this.type="img"==t.type?1:"mp4"==t.type?2:3,1==this.type)for(var e in t.data.images)t.data.imgs[e]={status:!0,imgUrl:t.data.images[e]};else t.data.imgs[0]={status:!0,imgUrl:t.data.cover};this.res=t},onShow:function(){},methods:{previewImage:function(t){console.log(this.res.data.imgs);var e=[];for(var n in this.res.data.imgs)e.push(this.res.data.imgs[n].imgUrl);uni.previewImage({urls:e,current:t,loop:!0})},choice:function(t){this.type=t},saveAll:function(){var t=this;this.savePoster()&&this.savePoster().then((function(e){if(e)for(var n in t.res.data.imgs)console.log(t.res.data.imgs[n].status),t.res.data.imgs[n].status&&t.saveImg(t.res.data.imgs[n].imgUrl).then((function(t){})).catch((function(t){}))}))},saveSingle:function(t){var e=this;this.savePoster()&&this.savePoster().then((function(n){n&&e.saveImg(t).then((function(t){})).catch((function(t){}))}))},saveVideo:function(t){var e=this;t&&this.savePoster().then((function(n){n&&e.saveImg(t).then((function(t){})).catch((function(t){}))})).catch((function(t){}))},saveVideoH5:function(t){this.saveImg(t).then((function(t){})).catch((function(t){}))},setClipboardData:function(t){uni.setClipboardData({data:t,success:function(){uni.showToast({title:"复制成功",icon:"none"})}})},savePoster:function(){return new Promise((function(t,e){uni.getSetting({success:function(e){e.authSetting["scope.writePhotosAlbum"]?t(!0):uni.authorize({scope:"scope.writePhotosAlbum",success:function(e){t(!0)},fail:function(e){console.log(e),uni.showModal({title:"提示",content:"请打开保存相册权限",duration:3e3,success:function(e){e.confirm?uni.openSetting({success:function(t){},fail:function(t){console.log("打开设置失败",t)}}):e.cancel&&(uni.showToast({title:"你拒绝了授权，无法保存到相册",duration:2e3,icon:"none"}),t(!1))}})}})}})}))},saveImg:function(t){return new Promise((function(e,n){wx.downloadFile({url:t,success:function(i){var a=i.tempFilePath;uni.saveImageToPhotosAlbum({filePath:a,success:function(t){uni.showToast({title:"保存成功",icon:"none"}),e(t)},fail:function(e){n(t+JSON.stringify(e))}})},fail:function(e){n(t+JSON.stringify(e))}})}))}}};e.default=i},"9e54":function(t,e,n){"use strict";n.r(e);var i=n("4f90"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},a144:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"menuBox"},[n("v-uni-view",{staticClass:"menu",class:1==t.type?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.choice(1)}}},[t._v("图片下载")]),n("v-uni-view",{staticClass:"menu",class:2==t.type?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.choice(2)}}},[t._v("视频下载")]),n("v-uni-view",{staticClass:"menu",class:3==t.type?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.choice(3)}}},[t._v("复制文案")])],1),1==t.type?n("v-uni-view",{staticClass:"imgBox"},t._l(t.res.data.imgs,(function(e,i){return n("v-uni-view",{key:i,staticClass:"img"},[n("img",{attrs:{src:e.imgUrl,mode:"widthFix",alt:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewImage(i)}}}),n("v-uni-view",{staticClass:"save"},[t._v("长按保存图片")])],1)})),1):t._e(),1==t.type?n("v-uni-view",{staticStyle:{height:"160rpx"}}):t._e(),2==t.type?n("v-uni-view",{staticClass:"videoBox"},[n("v-uni-view",{staticClass:"video"},[t.res.data.video?n("v-uni-video",{attrs:{poster:t.res.data.cover,src:t.res.data.video}}):t._e()],1),n("v-uni-view",{staticClass:"button"},[t._v("视频暂不支持保存")])],1):t._e(),3==t.type?n("v-uni-view",{staticClass:"textBox"},[n("v-uni-view",{staticClass:"text"},[t._v(t._s(t.res.data.title))]),n("v-uni-view",{staticClass:"button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setClipboardData(t.res.data.title)}}},[t._v("复制文案")])],1):t._e()],1)},a=[]},b009:function(t,e,n){"use strict";n.r(e);var i=n("a144"),a=n("9e54");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("c496");var s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"f98b3ce0",null,!1,i["a"],void 0);e["default"]=c.exports},c496:function(t,e,n){"use strict";var i=n("e18d"),a=n.n(i);a.a},e18d:function(t,e,n){var i=n("e1b0");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("446ecb8a",i,!0,{sourceMap:!1,shadowMode:!1})},e1b0:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.content[data-v-f98b3ce0]{height:100vh}.content .saveAll[data-v-f98b3ce0]{position:fixed;bottom:%?60?%;width:%?500?%;height:%?68?%;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%);background:#0080df;box-shadow:%?0?% %?6?% %?18?% %?0?% rgba(8,116,195,.3);border-radius:%?44?%;font-size:%?26?%;color:#fff;line-height:%?68?%;text-align:center}.content .menuBox[data-v-f98b3ce0]{height:%?88?%;width:100%;background:#fff;display:flex;justify-content:center;font-size:%?28?%;color:#999;line-height:%?88?%}.content .menuBox .menu[data-v-f98b3ce0]{text-align:center;margin:0 %?20?%}.content .menuBox .menu.active[data-v-f98b3ce0]{color:#0080df;position:relative}.content .menuBox .menu.active[data-v-f98b3ce0]::after{content:"";position:absolute;width:100%;height:%?2?%;background:#0080df;bottom:%?10?%;left:0}.content .imgBox[data-v-f98b3ce0]{width:calc(100% - %?40?%);margin:%?20?% auto 0;display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between}.content .imgBox .img[data-v-f98b3ce0]{width:%?350?%;overflow:hidden;border-radius:%?10?%;display:flex;align-items:center;justify-content:center;background:#f6f6f6;margin-bottom:%?20?%;position:relative}.content .imgBox .img .choice[data-v-f98b3ce0]{position:absolute;width:%?40?%;height:%?40?%;top:%?10?%;right:%?10?%;background:#fff;border-radius:%?40?%}.content .imgBox .img .choice img[data-v-f98b3ce0]{width:%?40?%;height:%?40?%}.content .imgBox .img img[data-v-f98b3ce0]{width:100%}.content .imgBox .img .save[data-v-f98b3ce0]{position:absolute;bottom:0;font-size:%?24?%;height:%?60?%;line-height:%?60?%;color:#fff;text-align:center;background:rgba(0,0,0,.7);width:100%}.content .videoBox .video[data-v-f98b3ce0]{width:calc(100% - %?40?%);margin:%?40?% auto 0;background:#000}.content .videoBox .video uni-video[data-v-f98b3ce0]{width:100%}.content .videoBox .button[data-v-f98b3ce0]{width:%?500?%;height:%?68?%;background:rgba(0,128,223,.99);opacity:.99;border-radius:%?44?%;font-size:%?28?%;font-weight:700;color:#fff;text-align:center;line-height:%?68?%;margin:%?40?% auto}.content .textBox .text[data-v-f98b3ce0]{width:calc(100% - %?80?%);margin:%?40?% auto 0;background:#f6f6f6;border-radius:%?10?%;padding:%?20?%;font-size:%?26?%;color:#333}.content .textBox .button[data-v-f98b3ce0]{width:%?500?%;height:%?68?%;background:rgba(0,128,223,.99);opacity:.99;border-radius:%?44?%;font-size:%?28?%;font-weight:700;color:#fff;text-align:center;line-height:%?68?%;margin:%?40?% auto}',""]),t.exports=e}}]);